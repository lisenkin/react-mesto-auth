{"version":3,"sources":["contexts/CurrentUserContext.js","images/Vector.svg","components/Header.js","components/Footer.js","components/Card.js","components/Main.js","images/Close_Icon.svg","components/PopupWithForm.js","components/ImagePopup.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","utils/api.js","components/Login.js","components/Register.js","components/ProtectedRoute.js","images/fail.svg","images/success.svg","components/InfoTooltip.js","utils/auth.js","components/App.js","reportWebVitals.js","index.js"],"names":["CurrentUserContext","React","createContext","Header","props","location","useLocation","className","src","logo","alt","pathname","email","onClick","onSignout","to","Footer","Card","currentUser","useContext","cardDeleteButton","card","owner","_id","type","onCardDelete","isLiked","likes","some","item","cardLikeButtonClassName","name","link","handleClick","onCardLike","length","Main","onEditAvatar","avatar","altAvatar","onEditProfile","about","onAddPlace","isLoading","cards","map","onCardClick","PopupWithForm","isOpen","closeBtn","onClose","title","onSubmit","children","textButton","ImagePopup","id","EditProfilePopup","useState","setName","setAbout","useEffect","e","preventDefault","onUpdateUser","placeholder","minLength","maxLength","value","onChange","target","required","EditAvatarPopup","avatarRef","useRef","onUpdateAvatar","current","ref","AddPlacePopup","inputNameRef","inputLinkRef","api","baseUrl","this","_baseUrl","res","ok","json","Promise","reject","status","fetch","method","credentials","headers","then","_checkResponse","data","body","JSON","stringify","cardId","Login","setEmail","password","setPassword","handleChange","evt","onLogin","Register","onRegister","ProtectedRoute","Component","component","loggedIn","InfoTooltip","success","successPicture","failPicture","BASE_URL","checkResponse","App","setCurrentUser","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","setCards","setLoggedIn","isInfoTooltipOpen","setIsInfoTooltipOpen","history","useHistory","isSuccess","setSuccess","closeAllPopups","all","getUserInfo","getInitialCards","userData","catch","err","console","log","push","jwt","localStorage","getItem","error","checkToken","Provider","removeItem","exact","path","changeLikeCardStatus","newCards","removeCard","filter","auth","setItem","token","text","setUserInfo","setCard","editUserAvatar","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6c0102e2.chunk.js","sourcesContent":["import React from 'react';\n\nexport const CurrentUserContext = React.createContext(); \n","export default __webpack_public_path__ + \"static/media/Vector.03b78ada.svg\";","import React from \"react\";\nimport logo from '../images/Vector.svg';\nimport { useLocation, Link } from \"react-router-dom\";\n\n//добавим ссылки для авторизации и нет\nfunction Header(props) {\n  const location = useLocation();\n  return (\n    <header className=\"header page__header\">\n      <img src={logo} alt=\"mesto logo\" className=\"logo\" />\n      {location.pathname === \"/\" && (\n        <div className=\"header__block\">\n          <p className=\"header__email\">{props.email}</p>\n          <a className=\"header__link\" onClick={props.onSignout}>\n            Выйти\n          </a>\n        </div>\n      )}\n      {location.pathname === \"/sign-up\" && (\n        <Link to=\"/sign-in\" className=\"header__link\">\n          Войти\n        </Link>\n      )}\n      {location.pathname === \"/sign-in\" && (\n        <Link to=\"/sign-up\" className=\"header__link\">\n          Регистрация\n        </Link>\n      )}\n    </header>\n  )\n}\n\nexport default Header\n//up\n","function Footer() {\n  return (\n    <footer className=\"footer page__footer\">\n      <p className=\"footer__author\">&copy; 2021 Mesto Russia lisenkin</p>\n    </footer>\n  );\n}\n\nexport default Footer;\n//up after rename\n","import React from \"react\";\nimport { useContext } from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n//update\n//прокинем сюда пропсы про card owner\n\nfunction Card(props) {\n  const currentUser = useContext(CurrentUserContext);\n  const isOwn = props.card.owner === currentUser._id;\n  const cardDeleteButton = isOwn\n    ? (<button className=\"place__button-remove\" type=\"button\" onClick={handleDeleteClick} />)\n    : (null);\n  const isLiked = props.card.likes.some(item => item === currentUser._id);\n  const cardLikeButtonClassName = `place__like ${isLiked\n    ? ('places__like_active')\n    : ''}`;\n\n  //вынесем сюда открытие по клику\n  //gallery\n  function handleImageClick() {\n    props.handleClick(props.card)\n  }\n  //like\n  function handleLikeClick() {\n    props.onCardLike(props.card)\n  }\n  //delete\n  function handleDeleteClick() {\n    props.onCardDelete(props.card)\n  }\n  return (\n    <article className=\"place\">\n      <img\n        className=\"place__photo\"\n        alt={props.card.name}\n        src={props.card.link}\n        onClick={handleImageClick}\n      />\n\n      {cardDeleteButton}\n      <div className=\"place__textarea\">\n        <h2 className=\"place__text\">{props.card.name}</h2>\n        <div className=\"place__column-block\">\n        <button className={cardLikeButtonClassName}\n            type=\"button\"\n            onClick={handleLikeClick}\n          />\n          <span className=\"place__score-like\">{props.card.likes.length}</span>\n        </div>\n      </div>\n    </article>\n  );\n}\n\n\nexport default Card;\n","import {useContext } from 'react';\nimport Card from './Card.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\n\n\nfunction Main(props) {\n  const currentUser = useContext(CurrentUserContext);\n//все функи переехали в апп\n\n\n  return (\n    <main className=\"page__content content\">\n      <section className=\"page__profile profile\">\n        <div className=\"profile__overlay\" onClick={props.onEditAvatar}>\n          <img src={currentUser.avatar} alt={props.altAvatar} className=\"profile__avatar\" />\n        </div>\n        <div className=\"profile__info\">\n          <div className=\"profile__info-textblock\">\n            <h1 className=\"profile__name\">{currentUser.name}</h1>\n            <button className=\"profile__button-edit\" type=\"button\" onClick={props.onEditProfile}/>\n          </div>\n          <p className=\"profile__status\">{currentUser.about}</p>\n        </div>\n        <button className=\"profile__button-add\" type=\"button\" onClick={props.onAddPlace}/>\n      </section>\n      <section className=\"page__places places\">\n      </section>\n      {props.isLoading\n        ? <p>Loading...</p>\n        : (<section className=\"places__list page__places places\">\n          {props.cards.map(item => (\n            <Card\n              key={item._id}\n              card={item}\n              handleClick={props.onCardClick}\n              onCardLike={props.onCardLike}\n              onCardDelete={props.onCardDelete}\n            />\n          )\n          )}\n        </section>)\n      }\n    </main>\n    \n  );\n}\nexport default Main\n","export default __webpack_public_path__ + \"static/media/Close_Icon.61b629a4.svg\";","import React from \"react\";\nimport closeBtn from '../images/Close_Icon.svg'\n//если б не вебинар с children вообще не разобраться.\n//update\nfunction PopupWithForm(props) {\n  return (\n\n    <div className={`popup popup_type_${props.name} ${props.isOpen && 'popup_visible'}`}>\n      <div className=\"popup__content\">\n        <img src={closeBtn} alt=\"закрыть\" className=\"popup__close-button\" onClick={props.onClose} />\n        <h3 className=\"popup__title\">{props.title}</h3>\n        <form className=\"popup__form\" name={props.name}\n          onSubmit={props.onSubmit}>\n          {props.children}\n          <button\n            className=\"button popup__button-submit\"\n            type=\"submit\">\n            {props.textButton}\n          </button>\n        </form>\n\n      </div>\n    </div>\n  );\n}\n\nexport default PopupWithForm;\n","function ImagePopup(props) {\n  const className = `popup popup_dark ${props.card.isOpen ? 'popup_visible' : ''}`;\n\n  //куда исчезла кнопка закрыть блин время час ночи\n  return (\n    <section className={className} id=\"popup-image\">\n      <figure className=\"popup__figure\">\n        <button\n          className=\"button popup__close-button\"\n          type=\"button\"\n          onClick={props.onClose}>\n        </button>\n        <img className=\"popup__image\"\n          src={props.card.link}\n          alt={props.card.name}\n        />\n        <figcaption className=\"popup__caption\">{props.card.name}</figcaption>\n      </figure>\n    </section>\n  );\n}\n\nexport default ImagePopup;\n","import { useState, useContext, useEffect } from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport PopupWithForm from './PopupWithForm';\n\nfunction EditProfilePopup(props) {\n  const [name, setName] = useState(\"\");\n  const [about, setAbout] = useState(\"\");\n  const currentUser = useContext(CurrentUserContext);\n\n  useEffect(() => {\n    setName(currentUser.name);\n    setAbout(currentUser.about);\n  }, [currentUser]);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    props.onUpdateUser({\n      name,\n      about,\n    });\n  }\n\n  function handleChangeName(e) {\n    setName(e.target.value);\n  }\n\n  function handleChangeAbout(e) {\n    setAbout(e.target.value);\n  }\n\n\n  return (\n    <PopupWithForm\n      name=\"popup-edit-card\"\n      title=\"Редактировать профиль\"\n      textButton=\"Сохранить\"\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onSubmit={handleSubmit}\n    >\n      <input\n        className=\"popup__input popup__input_type_name\"\n        type=\"text\" placeholder=\"Ваше имя\"\n        name=\"popup-input-name\"\n        minLength=\"2\"\n        maxLength=\"40\"\n        value={name}\n        onChange={handleChangeName}\n        required\n      />\n     <span className=\"popup__error popup-input-name-error\"></span>\n      <input\n        className=\"popup__input popup__input_type_status\"\n        type=\"text\" placeholder=\"Расскажите о себе\"\n        name=\"popup-input-status\"\n        minLength=\"2\"\n        maxLength=\"200\"\n        value={about}\n        onChange={handleChangeAbout}\n        required\n      />\n      <span className=\"popup__error popup-input-status-error\"></span>\n    </PopupWithForm>\n  );\n}\n\nexport default EditProfilePopup;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction EditAvatarPopup(props) {\n\n\n  const avatarRef = React.useRef('')\n\n  function handleSubmit(e) {\n    e.preventDefault()\n\n    props.onUpdateAvatar({\n      avatar: avatarRef.current.value,\n    })\n  }\n\n\n  return (\n    <PopupWithForm\n      name=\"popup-add-avatar\"\n      title=\"Обновить аватар\"\n      textButton=\"Обновить\"\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onSubmit={handleSubmit}\n    >\n      <input\n        className=\"popup__input popup__input_type_photo\"\n        type=\"url\"\n        placeholder=\"Ссылка на аватар\"\n        name=\"popup-input-url-avatar\"\n        ref={avatarRef}\n        required\n      />\n      <span className=\"popup__error popup-input-url-avatar-error\"></span>\n    </PopupWithForm>\n  );\n}\n\nexport default EditAvatarPopup;\n","import { useRef } from 'react';\nimport PopupWithForm from './PopupWithForm';\n\n//используем рефы(попробуем)\nfunction AddPlacePopup(props) {\n  const inputNameRef = useRef();\n  const inputLinkRef = useRef();\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    //передадим\n    props.onAddPlace({\n      name: inputNameRef.current.value,\n      link: inputLinkRef.current.value\n    });\n\n    inputNameRef.current.value = '';\n    inputLinkRef.current.value = '';\n  }\n\n\n  return (\n    <PopupWithForm\n      name=\"popup-add-card\"\n      title=\"Новое место\"\n      textButton=\"Создать\"\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onSubmit={handleSubmit}\n    >\n      <input\n        className=\"popup__input popup__input_type_place-name\"\n        type=\"text\"\n        placeholder=\"Название\"\n        name=\"popup-input-place-name\"\n        minLength=\"2\"\n        maxLength=\"30\"\n        ref={inputNameRef}\n        required\n      />\n      <span className=\"popup__error popup-input-place-name-error\"></span>\n      <input\n        className=\"popup__input popup__input_type_photo\"\n        type=\"url\" placeholder=\"Ссылка на картинку\"\n        name=\"popup-input-url\"\n        ref={inputLinkRef}\n        required\n      />\n      <span className=\"popup__error popup-input-url-error\"></span>\n    </PopupWithForm>\n  );\n}\n\nexport default AddPlacePopup;\n","//import { get } from \"mongoose\";\n\n// хоть тут не надо все переписывать *ну почти\nclass Api {\n\n    constructor({ baseUrl }) {\n      this._baseUrl = baseUrl;\n    }\n\n  // приватный метод для ошибки что б не было дублирования :)\n     _checkResponse(res) {\n      if (res.ok) {\n        return res.json();\n      }\n      return Promise.reject(`Ошибка: ${res.status}`);\n    }\n\n    // метод загрузки карточек с сервера\n    getInitialCards() {\n      return fetch(`${this._baseUrl}/cards`, {\n        method: 'GET',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      })\n      .then(this._checkResponse)\n    }\n    //загрузка юзеринфо\n    getUserInfo() {\n      return fetch(`${this._baseUrl}/users/me`, {\n        method: 'GET',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      })\n      .then(this._checkResponse)\n    }\n    //изменение юзеринфо передаем name и job(about)\n    setUserInfo(data) {\n      return fetch(`${this._baseUrl}/users/me`, {\n        method: 'PATCH',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          name: `${data.name}`,\n          about: `${data.about}`,\n        })\n      })\n      .then(this._checkResponse)\n    }\n    //добавить карточку  data (name link)  POST\n    setCard(data) {\n      return fetch(`${this._baseUrl}/cards`, {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n       name: `${data.name}`,\n        link: `${data.link}`,\n\n        })\n      })\n      .then(this._checkResponse)\n    }\n\n    removeCard(cardId) {\n      return fetch(`${this._baseUrl}/cards/${cardId}`, {\n        method: 'DELETE',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n      })\n      .then(this._checkResponse)\n    }\n\n    changeLikeCardStatus(cardId, isLiked) {\n      return fetch(`${this._baseUrl}/cards/${cardId}/likes`, {\n        method: isLiked ? 'DELETE' : 'PUT',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      })\n      .then(this._checkResponse)\n    }\n    /*addLike(cardId) {\n      return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\n        method: 'PUT',\n        headers: {\n          authorization: this._token,\n          'Content-Type': 'application/json'\n        },\n      })\n      .then(this._checkResponse)\n    }\n\n    removeLike(cardId) {\n      return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\n        method: 'DELETE',\n        headers: {\n          authorization: this._token,\n          'Content-Type': 'application/json'\n        },\n      })\n      .then(this._checkResponse)\n    }*/\n    // avatar = data\n    editUserAvatar(data) {\n      return fetch(`${this._baseUrl}/users/me/avatar`, {\n        method: 'PATCH',\n        credentials: 'include',\n        headers: {\n\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          avatar: `${data.avatar}`\n        })\n      })\n      .then(this._checkResponse)\n    }\n  }\n\n  const config = {\n   // baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-24',\n   // token: '1c58ab56-f6d5-4a78-b0cd-4b039a0e7da3'\n    //groupId: 'cohort-24'\n    baseUrl: 'https://api.mesto.lisena.nomoredomains.monster',\n    //baseUrl: 'http://localhost:3000',\n    credentials: 'include',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  }\n\n  const api = new Api(config);\n\nexport default api;\n","import React from \"react\";\n\n// логин - собрать все из форм, сохранить.\nfunction Login(props) {\n  const [email, setEmail] = React.useState(\"\");\n  const [password, setPassword] = React.useState(\"\");\n\n  function handleChange(evt) {\n    evt.preventDefault();\n\n    if (evt.target.name === \"email\") {\n      setEmail(evt.target.value);\n    } else if (evt.target.name === \"password\") {\n      setPassword(evt.target.value);\n    }\n  }\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    if (!email || !password) {\n      return;\n    }\n    props.onLogin(email, password);\n  }\n\n  return (\n    <section className=\"form\">\n      <div className=\"form__content\">\n        <h2 className=\"form__title\">Вход</h2>\n        <form className=\"form__input\" name=\"form__input\" onSubmit={handleSubmit}>\n        <input className=\"form__email\" id=\"email\" type=\"email\" placeholder=\"Email\" value={email} onChange={handleChange} name=\"email\" required />\n          <span className=\"form__email-error\" id=\"email-error\"></span>\n          <input className=\"form__password\" id=\"password\" type=\"password\" placeholder=\"Пароль\" value={password} onChange={handleChange} name=\"password\" required />\n          <span className=\"form__password-error\" id=\"password-error\"></span>\n          <button className=\"form__button\" type=\"submit\">\n            Войти\n          </button>\n        </form>\n      </div>\n    </section>\n  );\n}\n\n\nexport default Login;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\n//регистрация\nfunction Register(props) {\n  const [email, setEmail] = React.useState(\"\");\n  const [password, setPassword] = React.useState(\"\");\n\n  //\n  function handleChange(evt) {\n    evt.preventDefault();\n    if (evt.target.name === \"email\") {\n      setEmail(evt.target.value);\n    } else if (evt.target.name === \"password\") {\n      setPassword(evt.target.value);\n    }\n  }\n//передаем сохраненные\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    props.onRegister(email, password);\n  }\n\n  return (\n      <section className=\"form\">\n        <div className=\"form__content\">\n          <h2 className=\"form__title\">Регистрация</h2>\n          <form className=\"form__form\" name=\"form__form\" onSubmit={handleSubmit}>\n          <input className=\"form__email\"  type=\"email\" placeholder=\"Email\" value={email} onChange={handleChange} name=\"email\" required minLength=\"2\" maxLength=\"40\"/>\n            <span className=\"form__email-error\"  name=\"email-error\"></span>\n            <input className=\"form__password\"  type=\"password\" placeholder=\"Пароль\" value={password} onChange={handleChange} name=\"password\" required minLength=\"2\" maxLength=\"40\"/>\n            <span className=\"form__password-error\" name=\"password-error\"></span>\n            <button className=\"form__button\" type=\"submit\">\n              Зарегистрироваться\n            </button>\n          </form>\n          <div className=\"form__signup\">\n            <p>Уже зарегистрированы?</p>\n            <Link to=\"/sign-in\" className=\"form__link\">\n              Войти\n            </Link>\n          </div>\n        </div>\n      </section>\n    \n  );\n}\n\nexport default Register;\n","import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\n\n//protectedRoute  для логина\nconst ProtectedRoute = ({ component: Component, ...props }) => {\n  return (\n    <Route>\n      {() =>\n        props.loggedIn ? <Component {...props} /> : <Redirect to=\"./sign-in\" />\n      }\n    </Route>\n  );\n};\n\nexport default ProtectedRoute;\n","export default __webpack_public_path__ + \"static/media/fail.df8eddf6.svg\";","export default __webpack_public_path__ + \"static/media/success.1b6082f8.svg\";","import React from \"react\";\nimport failPicture from \"./../images/fail.svg\";\nimport successPicture from \"./../images/success.svg\";\n\nfunction InfoTooltip(props) {\n  return (\n    <section className={`popup popup_type_${props.name} ${props.isOpen && \"popup_visible\"}`}>\n      <div className=\"popup__content\">\n      <button\n          className=\"button popup__close-button\"\n          type=\"button\"\n          onClick={props.onClose}>\n        </button>\n        <div className=\"popup__tooltip\">\n          <img className=\"popup__tooltip-img\" alt=\"успех-не-успех\" src={props.success ? successPicture : failPicture} />\n          <p className=\"popup__tooltip-title\">{props.success ? \"Вы успешно зарегистрировались!\" : \"Что-то пошло не так! Попробуйте ещё раз.\"}</p>\n        </div>\n      </div>\n    </section>\n  );\n}\n\nexport default InfoTooltip;\n","export const BASE_URL = 'https://api.mesto.lisena.nomoredomains.monster';\n//export const BASE_URL = 'http://localhost:3000';\nexport const checkResponse = (res) => {\n  if (res.ok) {\n      return res.json();\n  }\n  return Promise.reject(`Ошибка: ${res.status}`);\n}\n\nexport const register = (email, password) => {\n  return fetch(`${BASE_URL}/signup`, {\n      method: 'POST',\n      credentials: 'include',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({email, password})\n    })\n    .then(checkResponse)\n  };\n\n\nexport const authorize = (email, password) => {\n    return fetch(`${BASE_URL}/signin`, {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({email, password})\n    })\n    .then(checkResponse)\n};\n\nexport const checkToken = (token) => {\nreturn fetch(`${BASE_URL}/users/me`, {\n    method: 'GET',\n    credentials: 'include',\n    headers: {\n    'Accept': 'application/json',\n    'Content-Type': 'application/json',\n    }\n})\n  .then(checkResponse)\n}\n","import React from \"react\";\nimport { useState, useEffect } from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js'\nimport '../index.css';\nimport Header from './Header.js';\nimport Footer from './Footer.js';\nimport Main from './Main.js';\nimport PopupWithForm from './PopupWithForm.js';\nimport ImagePopup from './ImagePopup.js';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport api from '../utils/api.js'\n//new parts\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport InfoTooltip from \"./InfoTooltip\";\nimport { Route, Switch, Redirect, useHistory } from 'react-router-dom';\nimport * as auth from '../utils/auth';\n\n\n\n//попробуем так\n//стоило так радостно вспоминать классы что б снова переписывать  на функции(\nfunction App() {\n  const [currentUser, setCurrentUser] = useState({\n    name: \"Loading...\",\n    about: ''\n  });\n  // + mail + loggedIn\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({ isOpen: false });\n  const [cards, setCards] = useState([]);\n  //const [isLoading, setIsLoading] = useState(false); выключим на время\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [email, setEmail] = React.useState('');\n  const [isInfoTooltipOpen, setIsInfoTooltipOpen] = React.useState(false);\n  const history = useHistory();\n  const [isSuccess, setSuccess] = React.useState(false);\n\n  // загрузим данные\nReact.useEffect(() => {\n  if (loggedIn) {\n    Promise.all([api.getUserInfo(), api.getInitialCards()])\n      .then(([userData, cards]) => {\n        setCurrentUser(userData.data)\n        setCards(cards.data)\n      })\n      .catch(err => {\n        console.log(`Данные с сервера не получены. Ошибка: ${err}.`)\n      })\n  }\n}, [loggedIn])\n\nReact.useEffect(() => {\n  if (loggedIn) {\n    history.push('/')\n  }\n}, [loggedIn, history])\n\n  //закрытие всех попапов (установим всем фолс)\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false)\n    setIsAddPlacePopupOpen(false)\n    setIsEditAvatarPopupOpen(false)\n    setSelectedCard({ isOpen: false });  //сбросим\n    setIsInfoTooltipOpen(false);\n  }\n\n\n  //эдит профиль\n  const handleEditProfileClick = () => { setIsEditProfilePopupOpen(true) }\n  //добавить место\n  const handleAddPlaceClick = () => { setIsAddPlacePopupOpen(true) }\n  //аватарка\n  const handleEditAvatarClick = () => { setIsEditAvatarPopupOpen(true) }\n  // большая картинка\n  const handleCardClick = (data) => { setSelectedCard({ isOpen: true, ...data }) }\n\n  //лайк с переделанным апи\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(item => item === currentUser._id);\n\n    api.changeLikeCardStatus(card._id, isLiked)\n      .then(res => {\n        const newCards = cards.map(item => item._id === card._id ? res : item);\n        setCards(newCards);\n      })\n      .catch(err => console.log(`Error: ${err}`));\n  }\n  //удалить карточку (свою)\n  function handleCardDelete(card) {\n    api.removeCard(card._id)\n      .then(res => {\n        const newCards = cards.filter(item => item === card ? null : item);\n        setCards(newCards);\n      })\n      .catch(err => console.log(`Error: ${err}`));\n  }\n  //обновим юзер инфо на новую\n  function handleUpdateUser(data) {\n    api.setUserInfo(data)\n      .then(res => {\n        setCurrentUser(res.data);\n        closeAllPopups();\n      })\n      .catch(err => console.log(`Error: ${err}`));\n  }\n  //обновим аватар\n  function handleUpdateAvatar(data) {\n    api.editUserAvatar(data)\n      .then(avatar => {\n        setCurrentUser(avatar);\n        closeAllPopups();\n      })\n      .catch(err => console.log(`Error: ${err}`));\n  }\n\n  //добавить карточку\n  function handleAddPlaceSubmit(data) {\n    api.setCard(data)\n      .then(res => {\n        setCards([res.data, ...cards]);\n        closeAllPopups();\n      })\n      .catch(err => console.log(`Error: ${err}`));\n  }\n//регистрация\n  function handleRegister(email, password) {\n    auth.register(email, password)\n      .then((data) => {\n        if (data){\n        setSuccess(true);\n        setIsInfoTooltipOpen(true);\n        history.push(\"/sign-in\");\n        }\n      })\n\n      .catch((err) => {\n        console.error(err);\n        setSuccess(false);\n        setIsInfoTooltipOpen(true);\n      });\n  }\n//логин\n  function handleLogin(email, password) {\n\n      auth.authorize(email, password)\n      .then((data) => {\n        if (data) {\n        localStorage.setItem('jwt', data.token);\n        setEmail(email);\n        setLoggedIn(true);\n        history.push(\"/\");\n        }\n      })\n      .catch((err) => {\n        console.error(err);\n        setIsInfoTooltipOpen(true);\n        setSuccess(false);\n      });\n  }\n//логаут\n  function handleLogout() {\n    localStorage.removeItem('jwt');\n    setEmail('');\n    setLoggedIn(false);\n    history.push('/sign-in');\n  }\n\n  useEffect(() => {\n  function checkToken() {\n    //возьмем из jwt\n    const jwt = localStorage.getItem(\"jwt\");\n    if (jwt) {\n      auth\n        .checkToken(jwt)\n        .then((data) => {\n          if (data) {\n            setEmail(data.email);\n            setLoggedIn(true);\n            history.push(\"/\");\n          } else {\n            setSuccess(false);\n            setIsInfoTooltipOpen(true);\n          }\n        })\n        .catch((err) => {\n          console.error(err);\n          setSuccess(false);\n          setIsInfoTooltipOpen(true);\n        })\n    }\n  }\n  checkToken();\n},[history]);\n\n\n  return (\n    <div className=\"page__content\">\n      <CurrentUserContext.Provider value={currentUser}>\n        <Header loggedIn={loggedIn} email={email} onSignout={handleLogout} />\n        <Switch>\n          <ProtectedRoute exact\n            path=\"/\"\n            component={Main}\n            onEditAvatar={handleEditAvatarClick}\n            onEditProfile={handleEditProfileClick}\n            onAddPlace={handleAddPlaceClick}\n            onCardClick={handleCardClick}\n            onCardLike={handleCardLike}\n            onCardDelete={handleCardDelete}\n            cards={cards}\n            loggedIn={loggedIn}\n          />\n          <Route path='/sign-in'>\n            <Login onLogin={handleLogin} />\n          </Route>\n          <Route path='/sign-up'>\n            <Register onRegister={handleRegister} />\n          </Route>\n          <Route> {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/sign-in\" />}</Route>\n        </Switch>\n\n        <Footer text=\"2021 mesto lisenkin\" />\n\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateUser}\n        />\n\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddPlace={handleAddPlaceSubmit}\n        />\n\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleUpdateAvatar}\n        />\n\n        <PopupWithForm\n          name=\"popup-remove-card\"\n          title=\"Вы уверены?\"\n          textButton=\"Да\"\n        />\n\n        <ImagePopup\n          isOpen={selectedCard}\n          card={selectedCard}\n          onClose={closeAllPopups}\n        />\n        <InfoTooltip\n          isOpen={isInfoTooltipOpen}\n          success={isSuccess}\n          onClose={closeAllPopups} />\n      </CurrentUserContext.Provider>\n    </div>\n\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App.js';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n    <App />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}